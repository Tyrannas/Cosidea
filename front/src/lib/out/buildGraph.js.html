<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: buildGraph.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: buildGraph.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by Orion on 6/5/2017.
 */

const _ = require('lodash');
let graphApi = {};

/**
 * Takes data from the db and parse it to build a graph
 * @param data
 * @returns {nodes, edges}
 */

graphApi.buildGraph = function( data ){
    let nodes = [];
    let edges = {};
    let hash = {};

    data.forEach(idea => {
        let n = {
            'id': idea.id,
            'label': idea.label,
            'size': 1,
            'color': "#ff951a",
            'tags': idea.tags
        };
        nodes.push(n);
        idea.tags.forEach(t => {
           hash[t] ? hash[t].push(idea.id) : hash[t] = [idea.id];
        });
    });

    for(let t in hash){
        for(let i=0; i &lt; hash[t].length; ++i){
            for(let j=i+1; j &lt; hash[t].length; ++j){
                if(edges[i + "-" + j]){
                    edges[i + "-" + j].weight *= 1.1;
                }
                else{
                    edges[edges[i + "-" + j]] = {
                        id :i + "-" + j,
                        source: hash[t][i],
                        target: hash[t][j],
                        size: 0.5,
                        color: "#3997ff",
                        weight: 1,
                        type: 'curve'
                    }
                }
            }
        }
    }
    edges = _.toArray(edges)
    return {'nodes': nodes, 'edges': edges};
};

export {graphApi};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#_">_</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Jun 05 2017 20:22:52 GMT+0200 (W. Europe Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
